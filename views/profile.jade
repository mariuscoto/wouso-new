extends layout

block content
  .row
    - if (!user)
      h4= __('profile_alert_login')

    - else
      h3= __('profile_title')

      if (user && !user.facebook.id && mysettings['login-fb'] === 'true')
        a(href='/connect/facebook')= __('profile_connect_facebook')
        br
      if (user && !user.twitter.id && mysettings['login-tw'] === 'true')
        a(href='/connect/twitter')= __('profile_connect_twitter')
        br
      if (user && !user.google.id && mysettings['login-gp'] === 'true')
        a(href='#', onclick='gapi.auth.signIn({callback: signInCallback})')= __('profile_connect_google')
        br
      if (user && !user.github.id && mysettings['login-gh'] === 'true')
        a(href='/connect/github')= __('profile_connect_github')
        br

      br
      h3= __('profile_title_badges')
      - each badge in badges
        h5= badge.name + ' (' + badge.history[0].count + ')'

      br
      h3= __('profile_title_info')
      - if (user)
        | ID: #{user._id} <br>
        | ROLE: #{user.role} <br>
        .spacer

      - if (user && user.local.email)
        b Local data <br>
        | Email: #{user.local.email} <br>
        .spacer

      - if (user && user.facebook.id)
        .profile-card
          .profile-card-name
            h3 #{user.facebook.name} (id: #{user.facebook.id})
          | Email: #{user.facebook.email} <br>
          | Token: #{user.facebook.token} <br>
          | From Facebook
        .spacer

      - if (user && user.twitter.id)
        .profile-card
          .profile-card-name
            h3 #{user.twitter.displayName} (id: #{user.twitter.id})
          | Username: #{user.twitter.username} <br>
          | Token: #{user.twitter.token} <br>
          | From Twitter
        .spacer

      - if (user && user.google.id)
        .profile-card
          .profile-card-avatar
            img(src=user.google.avatar, width='120px', height='120px')
          .profile-card-name
            h3 #{user.google.name} (id: #{user.google.id})
          | Email: #{user.google.email} <br>
          | Token: #{user.google.token} <br>
          | From Google
        .spacer

      - if (user && user.github.id)
        .profile-card
          .profile-card-name
            h3 #{user.github.name} (id: #{user.github.id})
          | Email: #{user.github.email} <br>
          | Token: #{user.github.token} <br>
          | From GitHub
        .spacer